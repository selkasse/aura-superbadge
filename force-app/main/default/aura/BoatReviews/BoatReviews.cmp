<aura:component controller="BoatReviews">
  <aura:attribute name="boat" type="Boat__c" />
  <aura:attribute name="boatReviews" type="BoatReview__c[]" access="private" />
  <aura:attribute name="noReviewsFound" type="Boolean" default="false" />

  <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
  <aura:handler name="change" value="{!v.boat}" action="{!c.doInit}" />

  <aura:method name="refresh" action="{!c.doInit}" />

  <ui:scrollerWrapper class="slds-feed">
    <ul class="slds-feed__list">
      <aura:iteration items="{!v.boatReviews}" var="review">
        <li class="slds-feed__item">
          <article class="slds-post">
            <header class="slds-post__header slds-media">
              <div class="slds-media__figure">
                <a
                  href="javascript:void(0);"
                  class="slds-avatar slds-avatar_circle"
                >
                  <img
                    alt="{!review.CreatedBy.Name}"
                    src="{!review.CreatedBy.SmallPhotoUrl}"
                    title="{!review.CreatedBy.Name}"
                  />
                </a>
              </div>
              <div class="slds-media__body">
                <div>
                  <p>
                    <a
                      href="javascript:void(0);"
                      title="{!review.CreatedBy.Name}"
                      data-userid="{!review.CreatedBy.Id}"
                      onclick="{!c.onUserInfoClick}"
                      >{!review.CreatedBy.Name}</a
                    >
                    <aura:if isTrue="{!review.CreatedBy.CompanyName}">
                      â€” {!review.CreatedBy.CompanyName}</aura:if
                    >
                  </p>
                  <p>
                    <lightning:formattedDateTime
                      value="{!review.CreatedDate}"
                    />&nbsp;
                    <lightning:formattedDateTime
                      value="{!review.CreatedDate}"
                      hour="numeric"
                      minute="numeric"
                      second="numeric"
                    />
                  </p>
                </div>
              </div>
            </header>
            <div class="slds-post__content slds-text-longform">
              <div class="slds-text-title_caps">{!review.Name}</div>
              <lightning:formattedRichText value="{!review.Comment__c}" />
            </div>
          </article>
        </li>
      </aura:iteration>
    </ul>
    <aura:if isTrue="{!v.boatReviews.length==0}">
      <div class="slds-align_absolute-center">No reviews available</div>
    </aura:if>
  </ui:scrollerWrapper>
</aura:component>
